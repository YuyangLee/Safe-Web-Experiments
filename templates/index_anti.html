<!DOCTYPE html>
{% autoescape false %}
<html>
  <head>
    <meta charset="utf-8" />
    <title>Web安全实验</title>
    <script>
      function searchFormEsc() {
        searchInput = document.getElementById("searchInput");
        searchInput.value = encodeURI(searchInput.value);
        return true;
      }

      function commentFormEsc() {
        commentInput = document.getElementById("commentInput");
        commentInput.value = encodeURI(commentInput.value);
        return true;
      }
    </script>
  </head>

  <body>
    <!-- Header -->
    <header>
      <h1>Web安全实验</h1>
      <p>你可以查询并且发布评论</p>
    </header>

    <!-- Search form -->
    <form method="GET" id="searchForm" onsubmit="return searchFormEsc()">
      <input type="text" name="q" id="searchInput" placeholder="搜索内容" autocomplete="off" />
      <input type="submit" value="提交" />
    </form>

    <!-- Comments -->
    {% if not search_query %}
    <h3>所有的评论如下:</h3>
    {% else %}
    <h3>包含 "{{ search_query }}" 评论如下:</h3>
    {% endif %} {% for comment in comments %}
    <div>
      <p>{{ comment }}</p>
    </div>
    {% endfor %}

    <!-- Write form -->
    <form action="/" method="POST" onsubmit="return commentFormEsc()">
      <input type="text" name="comment" id="commentInput" placeholder="评论" autocomplete="off" />
      <input type="submit" value="提交新评论" />
    </form>
  </body>
</html>
{% endautoescape %}
